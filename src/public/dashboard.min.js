(()=>{var a,t=JSON.parse(document.currentScript.getAttribute("data-params")),d=function(){$("#toggle-dashboard").data("status","unlocked").removeClass("btn-outline-secondary").addClass("btn-danger").html('<i class="fa-solid fa-lock-open fa-fw"></i>'),$("#dashboard-widgets").append('<div class="dashboard-buttons d-flex flex-column justify-content-between"><button class="btn btn-outline-secondary btn-sm" data-action="select-widget"><i class="fa-solid fa-plus fa-fw"></i></button><button class="btn btn-outline-secondary btn-sm d-none" data-action="dashboard-add-line"><i class="fa-solid fa-turn-down fa-fw fa-rotate-90"></i></button></div>')};$("#toggle-dashboard").on("click",(function(){"locked"===$(this).data("status")?d():($("#toggle-dashboard").data("status","locked").removeClass("btn-danger").addClass("btn-outline-secondary").html('<i class="fa-solid fa-lock fa-fw"></i>'),$(".add-widget").remove())})),$((function(){"unlocked"===$("#toggle-dashboard").data("status")&&d()})),$(document).on("click",'[data-action="select-widget"]',(function(){var d=$(this).closest("[data-line]");$.ajax({url:t.modal_route,type:"get",success:function(t){d.attr("data-active-line",1),a=bootbox.dialog({message:t,size:"large",onHide:function(){d.removeAttr("data-active-line")}})}})})),$(document).on("click",'[data-action="add-widget"]',(function(){$("[data-active-line]");$.ajax({url:t.load_widget,type:"post",data:{slug:$(this).attr("data-slug")},success:function(t){$("#dashboard-widgets").find(".dashboard-buttons").before(t),a.modal("hide"),$('[data-action="dashboard-add-line"]').removeClass("d-none")}})})),$(document).on("click",'[data-action="dashboard-add-line"]',(function(){$(".dashboard-buttons").before('<div class="d-line-break"></div>'),$('[data-action="dashboard-add-line"]').addClass("d-none")}))})();